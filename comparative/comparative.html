<!DOCTYPE html>
<html>

<head>
  <title>Covid comparative analysis :: Dalliance</title>
  <link href="/dalliance/css/bootstrap.css" rel="stylesheet">
  <link href="/dalliance/css/font-awesome.min.css" rel="stylesheet">
  <link href="/dalliance/css/dalliance.css" rel="stylesheet">
  <script language="javascript" src="/dalliance/build/dalliance-all.js"></script>
  <script language="javascript" src="comparative.js"></script>
  <script language="javascript">
    var chr = '1'
    var viewStart = 1
    var viewEnd = 1000

    var original = new Browser({
      chr: chr,
      viewStart: viewStart,
      viewEnd: viewEnd,
      cookieKey: `dalliance-original`,
      pageName: 'origHolder',
      fullScreen: true,
      disableDefaultFeaturePopup: true,
      rulerLocation: 'right',
      singleBaseHighlight: false,
      reverseScrolling: true,
      coordSystem: {
        speciesName: 'orig',
        auth: ' ',
        version: ' ',
      },
      chains: {
        mod2orig: {
          coords: {
            speciesName: 'mod',
            auth: 'i ',
            version: ' ',
          },
          uri: 'modifications.mod2orig.bb',
          type: 'bigbed'
        }
      },
      sources: [{
          name: 'Genome',
          desc: 'Original Genome',
          twoBitURI: 'assembly.2bit',
          disabled: false,
          pinned: true
        },
        { name: 'illumina_reads',
          desc: 'illumina_reads',
          //bamURI: 'illumina_original.bam',
          bwgURI: 'illumina_original.bb',
          disabled: false,
          pinned: true,
        },
        { name: 'illumina',
          desc: 'illumina',
          bwgURI: 'illumina_original.bw',
          disabled: false,
          pinned: true,
        },
        { name: 'ONT_reads',
          desc: 'ONT_reads',
          //bamURI: 'ONT_original.bam',
          bwgURI: 'ONT_original.bb',
          disabled: false,
          pinned: true,
        },
        { name: 'ONT',
          desc: 'ONT',
          bwgURI: 'ONT_original.bw',
          disabled: false,
          pinned: true,
        },
        { name: 'VCF',
          desc: 'VCF',
          bwgURI: 'modifications.qvcf.bb',
          disabled: false,
          pinned: true,
        },
      ],
      uiPrefix: 'https://www.biodalliance.org/dev/',
      fullScreen: true,
      reverseScrolling: true,
      maxWorkers: 0,
      maxViewWidth: 1000000,
      noRegistryTabs: true,
      defaultHighlightFill: 'yellow',
      defaultHighlightAlpha: 0.15,
      toolbarBelow: false,
      disablePoweredBy: true,
    })

    let modified = new Browser({
      chr: chr,
      viewStart: viewStart,
      viewEnd: viewEnd,
      cookieKey: 'dalliance-modified',
      pageName: 'modHolder',
      coordSystem: {
        speciesName: 'mod',
        auth: ' ',
        version: ' ',
      },
      chains: {
        orig2mod: {
          coords: {
            speciesName: 'orig',
            auth: ' ',
            version: ' ',
          },
          uri: 'modifications.orig2mod.bb',
          type: 'bigbed'
        }
      },
      sources: [{
          name: 'Genome',
          desc: 'Modified Genome',
          twoBitURI: 'modified.2bit',
          disabled: false,
          pinned: true
        },
        { name: 'illumina_reads',
          desc: 'illumina_reads',
          //bamURI: 'illumina_modified.bam',
          bwgURI: 'illumina_modified.bb',
          disabled: false,
          pinned: true,
        },
        { name: 'illumina',
          desc: 'illumina',
          bwgURI: 'illumina_modified.bw',
          disabled: false,
          pinned: true,
        },
        { name: 'ONT_reads',
          desc: 'ONT_reads',
          //bamURI: 'ONT_modified.bam',
          bwgURI: 'ONT_modified.bb',
          collapseSuperGroups: false,
          disabled: false,
          pinned: true,
        },
        { name: 'ONT',
          desc: 'ONT',
          bwgURI: 'ONT_modified.bw',
          disabled: false,
          pinned: true,
        },
        { name: 'VCF',
          desc: 'VCF',
          bwgURI: 'modifications.rvcf.bb',
          disabled: false,
          pinned: true,
        },
      ],
      uiPrefix: 'http://www.biodalliance.org/dev/',
      disablePoweredBy: false,
      toolbarBelow: true,
    })

    original.addInitListener(function () {
      var compcan = document.getElementById('comparison');
      original.addViewListener(function () {
        refreshComparative(compcan, original, 'mod2orig', modified, 'orig2mod');
      });
      modified.addViewListener(function () {
        refreshComparative(compcan, original, 'mod2orig', modified, 'orig2mod');
      });
      compcan.addEventListener('click', function (ev) {
        syncComparative(original, modified, 'mod2orig');
      }, false);
    })
  </script>
</head>

<body>
  <div id='origHolder'></div>
  <canvas id='comparison' width='800' height='200'></canvas>
  <div id='modHolder'></div>
</body>

</html>
